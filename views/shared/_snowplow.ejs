<!-- Snowplow starts plowing -->
<script type="text/javascript">

    ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
    p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
    };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
    n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","//cdn.datacamp.com/sp/2.9.3.js","snowplow"));

    var options = {
      appId: 'rdocumentation',
      platform: 'web',
      post: true,
      discoverRootDomain: true,
      contexts: {
        webPage: true,
        performanceTiming: true
      }
    };

    <% if (process.env.NODE_ENV === 'production') { %>
      options.forceSecureTracker = true;
      options.postPath = '/spevent';
    <% } %>

    window.snowplow('newTracker', 'co', "<%- process.env.NODE_ENV === 'production' ? 'www.datacamp.com' : 'com-datacamp.mini.snplow.net' %>", options);
    window.snowplow('enableActivityTracking', 10, 10); // Ping every 10 seconds after 10 seconds
    window.snowplow('enableLinkClickTracking');

    window.snowplow('trackPageView', null, [
      {
        schema: 'iglu:com.datacamp/user/jsonschema/1-0-0',
        data: {
          anonId: $jq.cookie('dc_aid'),
        }
      }
    ]);

    var config = {
      forms: {
        whitelist: ["snowplow_tracked"]
      },
      fields: {
        blacklist: ['password', 'password_confirmation']
      }
    };

    window.snowplow('enableFormTracking', config);
</script>
<!-- Snowplow stop plowing -->
